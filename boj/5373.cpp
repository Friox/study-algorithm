#include <algorithm>
#include <stdio.h>
char map[54], stage[54], buffer[54], color[6] = {'w', 'y', 'r', 'o', 'g', 'b'};
const int MOVE_MAP[6][20][2] = {
    {
		{45, 33}, {48, 34}, {51, 35}, {20, 45}, {19, 48}, {18, 51}, {44, 20},
		{41, 19}, {38, 18}, {33, 44}, {34, 41}, {35, 38}, {2, 0},   {5, 1},
		{8, 2},   {7, 5},   {6, 8},   {3, 7},   {0, 6},   {1, 3}
	},
    {
		{36, 29}, {39, 28}, {42, 27}, {24, 36}, {25, 39}, {26, 42}, {53, 24},
     	{50, 25}, {47, 26}, {29, 53}, {28, 50}, {27, 47}, {11, 9},  {14, 10},
     	{17, 11}, {16, 14}, {15, 17}, {12, 16}, {9, 15},  {10, 12}
	},
    {
		{51, 6},  {52, 7},  {53, 8},  {15, 51}, {16, 52}, {17, 53}, {42, 15},
     	{43, 16}, {44, 17}, {6, 42},  {7, 43},  {8, 44},  {20, 18}, {23, 19},
     	{26, 20}, {25, 23}, {24, 26}, {21, 25}, {18, 24}, {19, 21}
	},
    {
		{47, 11}, {46, 10}, {45, 9},  {2, 47},  {1, 46},  {0, 45},  {38, 2},
     	{37, 1},  {36, 0},  {11, 38}, {10, 37}, {9, 36},  {29, 27}, {32, 28},
     	{35, 29}, {34, 32}, {33, 35}, {30, 34}, {27, 33}, {28, 30}
	},
    {
		{0, 27},  {3, 30},  {6, 33},  {18, 0},  {21, 3},  {24, 6},  {17, 18},
     	{14, 21}, {11, 24}, {27, 17}, {30, 14}, {33, 11}, {38, 36}, {41, 37},
     	{44, 38}, {43, 41}, {42, 44}, {39, 43}, {36, 42}, {37, 39}
	},
    {
		{9, 35},  {12, 32}, {15, 29}, {26, 9},  {23, 12}, {20, 15}, {8, 26},
     	{5, 23},  {2, 20},  {35, 8},  {32, 5},  {29, 2},  {47, 45}, {50, 46},
     	{53, 47}, {52, 50}, {51, 53}, {48, 52}, {45, 51}, {46, 48}
	}
};

void rotate(int r, int cnt) {
	for (int i = 0; i < cnt; i++) {
		std::copy(stage, stage + 54, buffer);
    	for (int l = 0; l < 20; l++) buffer[MOVE_MAP[r][l][0]] = stage[MOVE_MAP[r][l][1]];
    	std::copy(buffer, buffer + 54, stage);
	}
}

void printCube() {
	for (int i = 0; i < 3; i++) {
		for (int j = 0; j < 3; j++) {
			putchar(stage[i * 3 + j]);
		}
		putchar('\n');
	}
}

int main() {
	for (int i = 0; i < 6; i++) {
		for (int j = 0; j < 9; j++) {
			map[i * 9 + j] = color[i];
		}
	}
	int tc, n, rI, cnt;
	char d[3];
	scanf("%d", &tc);
	while (tc--) {
		std::copy(map, map + 54, stage);
		scanf("%d", &n);
		while (n--) {
			scanf("%s", d);
			if (d[0] == 'U') rI = 0;
			else if (d[0] == 'D') rI = 1;
			else if (d[0] == 'F') rI = 2;
			else if (d[0] == 'B') rI = 3;
			else if (d[0] == 'L') rI = 4;
			else rI = 5;
			if (d[1] == '+') cnt = 1;
			else cnt = 3;
			rotate(rI, cnt);
		}
		printCube();
	}
}